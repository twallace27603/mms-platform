$(document).ready(function(){function r(){var f=[],r=new Date,u,e;for(batchId=""+r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate()+"T"+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds(),n.push(batchId),u=0;u<5;u++)f.push({BatchId:batchId,ID:u,Payload:"Message # "+u+" for batch "+batchId});return e=JSON.stringify({Items:f}),$.ajax({url:"/api/mms/generateQueueMessages",method:"POST",data:e,contentType:"application/json"}).done(function(n){t(n,"Generate Messages")}).fail(function(n,t,r){i(r,"Generate Messages")}),!1}function u(){return $.get("/api/mms/getQueueMessages").done(function(n){t(n,"Retrieve Messages")}).fail(function(n,t,r){i(r,"Retrieve Messages")}),!1}function f(){var r,u,f,i;if(n.length>0){for(r=!1,u=0;u<n.length;u++)if(f=n[u],$.get({url:"/api/mms/getTableRows?batchId="+f,async:!1}).done(function(n){n.code>0&&(t(n,"Table rows for batch id "+f),r=!0)}),r){n=[];break}r||(i="<h2>Checking table<\/h2><hr />",i+="<p>Processed at "+Date()+"<\/p>",i+="<p>There are no results for the current batch ids.  The web job may not have processed.  Try again in 30 seconds.",$("#result").html(i))}else i="<h2>Checking table<\/h2><hr />",i+="<p>Processed at "+Date()+"<\/p>",i+="<p>There are no batch ids.  Try generating messages first.",$("#result").html(i);return!1}function t(n,t){var i="<h2>"+t+"<\/h2><hr />";i+="<p>Processed at "+Date()+"<\/p>";i+="<table class='table'><thead class='thead-light'><th scope='col'>Result<\/th><th scope='col'>Value<\/th><\/thead><tbody>";i+="<tr><th scope='row'>Status<\/th><td>"+(n.success?"Success":"Error")+"<td><tr>";i+="<tr><th scope='row'>Code/Count<\/th><td>"+n.code+"<td><tr>";i+="<tr><th scope='row'>Results<th><td><ul>";$(n.data).each(function(n,t){i+="<li>"+t+"<\/li>"});i+="<\/ul><\/tr><\/tbody><\/table>";$("#result").html(i)}function i(n,t){var i="<h2>"+t+"<\/h2><hr />";i+="<p>Processed at "+Date()+"<\/p>";i+="<p>"+n+"<\/p>";$("#result").html(i)}$("#generate").click(r);$("#retrieve").click(u);$("#checkTable").click(f);var n=[]});