$(document).ready(function(){function u(){var f=[],i=new Date,u,e;for(batchId=""+i.getFullYear()+"-"+i.getMonth()+"-"+i.getDate()+"T"+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds(),n.push(batchId),u=0;u<5;u++)f.push({BatchId:batchId,ID:u,Payload:"Message # "+u+" for batch "+batchId});return e=JSON.stringify({Items:f}),$.ajax({url:"/api/mms/generateQueueMessages",method:"POST",data:e,contentType:"application/json"}).done(function(n){t(n,"Generate Messages")}).fail(function(n,t,i){r(i,"Generate Messages")}),!1}function f(){return $.get("/api/mms/getQueueMessages").done(function(n){t(n,"Retrieve Messages")}).fail(function(n,t,i){r(i,"Retrieve Messages")}),!1}function e(){var r,u,f,i;if(n.length>0){for(r=!1,u=0;u<n.length;u++)if(f=n[u],$.get({url:"/api/mms/getTableRows?batchId="+f,async:!1}).done(function(n){n.code>0&&(t(n,"Table rows for batch id "+f),r=!0)}),r){n=[];break}r||(i="<h2>Checking table<\/h2><hr />",i+="<p>Processed at "+Date()+"<\/p>",i+="<p>There are no results for the current batch ids.  The web job may not have processed.  Try again in 30 seconds.",$("#result").html(i))}else i="<h2>Checking table<\/h2><hr />",i+="<p>Processed at "+Date()+"<\/p>",i+="<p>There are no batch ids.  Try generating messages first.",$("#result").html(i);return!1}function o(){var n;$("#result").html("<h2>Generate Activity<\/h2><p>The system will generate 30 calls to the server and display the results below.<\/p><ul id='executionResult' class='resultsDetails'><\/ul><div id='callbacks'><\/div>");var u=0,r=0,t=300;for(n=0;n<t;n++)$.get("/api/mms/generateActivity/"+n).done(function(n){$("#executionResult").append("<li>"+n.data[0]+"<\/li>");i(++r,t)}).fail(function(){$("#executionResult").append("<li>Generated error.  This is expected.  Error count = "+ ++u+"<\/li>");i(++r,t)});return!1}function i(n,t){$("#callbacks").text("Execution "+n+" of "+t)}function t(n,t){var i="<h2>"+t+"<\/h2><hr />";i+="<p>Processed at "+Date()+"<\/p>";i+="<table class='table'><thead class='thead-light'><th scope='col'>Result<\/th><th scope='col'>Value<\/th><\/thead><tbody>";i+="<tr><th scope='row'>Status<\/th><td>"+(n.success?"Success":"Error")+"<td><tr>";i+="<tr><th scope='row'>Code/Count<\/th><td>"+n.code+"<td><tr>";i+="<tr><th scope='row'>Results<th><td><ul class='resultsDetails'>";$(n.data).each(function(n,t){i+="<li>"+t+"<\/li>"});i+="<\/ul><\/tr><\/tbody><\/table>";$("#result").html(i)}function r(n,t){var i="<h2>"+t+"<\/h2><hr />";i+="<p>Processed at "+Date()+"<\/p>";i+="<p>"+n+"<\/p>";$("#result").html(i)}$("#generate").click(u);$("#retrieve").click(f);$("#checkTable").click(e);$("#generateActivity").click(o);var n=[]});